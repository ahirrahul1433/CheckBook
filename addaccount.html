<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Account</title>
    <link rel="stylesheet" href="AddAccount.css">
</head>
<body>
    <div class="background-container">
        <div class="container">
            <h2>Add New Account</h2>
            <form class="account-form" id="add-account-form">
                <label for="accountName">Account Name</label>
                <input type="text" id="accountName" name="accountName" required>
                
                <label for="group">Group</label>
                <select id="group" name="group">
                    <option value="Creditors">Creditors</option>
                    <option value="Debtors">Debtors</option>
                    <option value="Expense">Expense</option>
                    <option value="Partner">Partner</option>
                </select>
                
                <label for="balance">Balance</label>
                <input type="number" id="balance" name="balance" required>

                <div class="button-container">
                    <button type="submit" class="action-button">Add Account</button>
                    <button type="button" class="action-button cancel-button">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Handle cancel button click
            const cancelButton = document.querySelector('.cancel-button');
            cancelButton.addEventListener('click', function() {
                window.location.href = 'accounts.html'; // Redirect to accounts.html
            });

            // Handle form submission
            const addAccountForm = document.getElementById('add-account-form');
            addAccountForm.addEventListener('submit', function(event) {
                event.preventDefault(); // Prevent default form submission

                // Get form values
                const accountName = document.getElementById('accountName').value;
                const group = document.getElementById('group').value;
                const balance = document.getElementById('balance').value;

                console.log("Submitting form with values:", { accountName, group, balance });

                // Add account to backend
                fetch('http://localhost:3000/addAccount', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ accountName, group, balance: parseFloat(balance) })
                })
                .then(response => response.json())
                .then(data => {
                    console.log("Account added:", data);
                    // Redirect to accounts.html after adding account
                    window.location.href = 'accounts.html';
                })
                .catch((error) => {
                    console.error("Error adding account:", error);
                });
            });
        });
    </script>
</body>
</html>
